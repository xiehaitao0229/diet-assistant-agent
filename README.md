# é¥®é£Ÿè®°å½•åŠ©æ‰‹ (Diet Assistant)

ä¸€ä¸ªåŸºäº Mastra æ¡†æ¶å’Œ DeepSeek AI çš„æ™ºèƒ½é¥®é£Ÿè®°å½•åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾è®°å½•å’Œåˆ†ææ—¥å¸¸é¥®é£Ÿï¼Œæä¾›ä¸ªæ€§åŒ–çš„è¥å…»å»ºè®®ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½é£Ÿç‰©è¯†åˆ«**: ä½¿ç”¨ DeepSeek AI è‡ªåŠ¨è¯†åˆ«å’Œæœç´¢é£Ÿç‰©
- ğŸ“Š **è¥å…»åˆ†æ**: è·å–è¯¦ç»†çš„è¥å…»æˆåˆ†ä¿¡æ¯ï¼ˆå¡è·¯é‡Œã€è›‹ç™½è´¨ã€ç¢³æ°´åŒ–åˆç‰©ç­‰ï¼‰
- ğŸ½ï¸ **é¤æ¬¡ç®¡ç†**: æ”¯æŒæ—©é¤ã€åˆé¤ã€æ™šé¤å’Œé›¶é£Ÿçš„åˆ†ç±»è®°å½•
- ğŸ’¡ **å¥åº·å»ºè®®**: åŸºäºä¸­å›½äººé¥®é£Ÿä¹ æƒ¯æä¾›ä¸ªæ€§åŒ–å¥åº·æç¤º
- ğŸ”„ **å·¥ä½œæµè‡ªåŠ¨åŒ–**: å®Œæ•´çš„é¥®é£Ÿè®°å½•å·¥ä½œæµï¼Œä»æœç´¢åˆ°è®°å½•ä¸€é”®å®Œæˆ
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**: ä¸­è‹±æ–‡åŒè¯­äº¤äº’ï¼Œé€‚åˆä¸­æ–‡ç”¨æˆ·ä½¿ç”¨

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

- **æ¡†æ¶**: Mastra (AI Agent å’Œ Workflow æ¡†æ¶)
- **AI æ¨¡å‹**: DeepSeek Chat API
- **è¯­è¨€**: TypeScript
- **éƒ¨ç½²**: Cloudflare Workers
- **æ•°æ®åº“**: LibSQL (SQLite)

## ğŸ“ é¡¹ç›®ç»“æ„

```
diet-assistant/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mastra/
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â””â”€â”€ diet-agent.ts      # é¥®é£Ÿè®°å½• AI Agent
â”‚   â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”‚   â””â”€â”€ diet-logging-workflow.ts  # é¥®é£Ÿè®°å½•å·¥ä½œæµ
â”‚   â”‚   â””â”€â”€ index.ts               # Mastra é…ç½®
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ food.ts                # é£Ÿç‰©ç›¸å…³ç±»å‹å®šä¹‰
â”œâ”€â”€ test/                          # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20.9.0
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### ç¯å¢ƒé…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
DEEPSEEK_API_KEY=your_deepseek_api_key
```

### å¼€å‘è¿è¡Œ

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æµ‹è¯• Agent
npm run test:agent

# äº¤äº’å¼æµ‹è¯•
npm run test:interactive
```

### éƒ¨ç½²

```bash
# æ„å»ºå¹¶éƒ¨ç½²åˆ° Cloudflare Workers
npm run deploy
```

## ğŸ¤– AI Agent åŠŸèƒ½

é¥®é£Ÿè®°å½•åŠ©æ‰‹å…·å¤‡ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š

- **é£Ÿç‰©æœç´¢**: æ ¹æ®ç”¨æˆ·æè¿°æ™ºèƒ½æœç´¢æœ€åŒ¹é…çš„é£Ÿç‰©
- **è¥å…»åˆ†æ**: è·å–å‡†ç¡®çš„è¥å…»æˆåˆ†æ•°æ®
- **ä¸­æ–‡ä¼˜åŒ–**: ä¸“é—¨é’ˆå¯¹ä¸­æ–‡é£Ÿç‰©åç§°è¿›è¡Œè¯†åˆ«å’Œç¿»è¯‘
- **å¥åº·å»ºè®®**: ç»“åˆä¸­å›½äººé¥®é£Ÿä¹ æƒ¯æä¾›å®ç”¨å»ºè®®

## ğŸ“Š å·¥ä½œæµç¨‹

é¥®é£Ÿè®°å½•å·¥ä½œæµåŒ…å«å››ä¸ªä¸»è¦æ­¥éª¤ï¼š

1. **é£Ÿç‰©æœç´¢** (`search-food-step`)
   - æ ¹æ®ç”¨æˆ·æè¿°æœç´¢é£Ÿç‰©
   - è¿”å›æœ€åŒ¹é…çš„é£Ÿç‰©é€‰é¡¹

2. **è¥å…»è·å–** (`get-nutrition-step`) 
   - è·å–é€‰ä¸­é£Ÿç‰©çš„è¯¦ç»†è¥å…»ä¿¡æ¯
   - è®¡ç®—æŒ‡å®šåˆ†é‡çš„è¥å…»æˆåˆ†

3. **æ‘˜è¦ç”Ÿæˆ** (`generate-summary-step`)
   - ç”Ÿæˆé¥®é£Ÿè®°å½•æ‘˜è¦
   - æä¾›ä¸ªæ€§åŒ–å¥åº·å»ºè®®

4. **æ ¼å¼åŒ–è¾“å‡º** (`format-output-step`)
   - æ•´ç†æœ€ç»ˆè¾“å‡ºç»“æœ
   - ç”Ÿæˆå‹å¥½çš„ç”¨æˆ·åé¦ˆ

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

```typescript
import { dietLoggingWorkflow } from './src/mastra/workflows/diet-logging-workflow';

// è®°å½•ä¸€é¡¿é¥®é£Ÿ
const result = await dietLoggingWorkflow.execute({
  food_description: "ä¸€ä¸ªè‹¹æœ",
  meal_type: "snack",
  serving_amount: "150g"
});

console.log(result.message); // "æˆåŠŸè®°å½• ä¸€ä¸ªè‹¹æœ! ğŸ‰"
console.log(result.health_tips); // å¥åº·å°è´´å£«æ•°ç»„
```

## ğŸ› ï¸ å¯ç”¨è„šæœ¬

- `npm run dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `npm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `npm run start` - å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
- `npm run deploy` - éƒ¨ç½²åˆ° Cloudflare Workers
- `npm run test:agent` - æµ‹è¯• AI Agent
- `npm run test:interactive` - äº¤äº’å¼æµ‹è¯•

## ğŸ”§ é…ç½®

### Agent é…ç½®

AI Agent ä½¿ç”¨ DeepSeek Chat æ¨¡å‹ï¼Œæ”¯æŒä»¥ä¸‹é…ç½®ï¼š

- æ¨¡å‹æä¾›å•†ï¼šDeepSeek
- åŸºç¡€ URLï¼š`https://api.deepseek.com`
- è¯­è¨€ï¼šä¸­æ–‡ä¸ºä¸»ï¼Œè‹±æ–‡è¾…åŠ©

### éƒ¨ç½²é…ç½®

ä½¿ç”¨ Cloudflare Workers éƒ¨ç½²ï¼Œæ”¯æŒï¼š

- Node.js å…¼å®¹æ€§
- å…¨çƒ CDN åˆ†å‘
- æ— æœåŠ¡å™¨æ¶æ„


## ğŸ“„ è®¸å¯è¯

ISC License


## å‰ç«¯é¡¹ç›®åœ°å€
https://github.com/xiehaitao0229/diet-assistant-fe

## æ•´ä½“çš„é¡¹ç›®ç»“æ„å›¾
![e575845f1d5e69df627e3825ce38b694](https://github.com/user-attachments/assets/e76bc1ff-f9d1-445c-bf11-3f35d33969c5)

